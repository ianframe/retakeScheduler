<template name="adminHome">
  <h4>Approved Scheduled Retakes</h4>
  <hr />
  <p>Sort By: <a href="#" class="sortLink" id="sortByStandard">Standard</a> | <a href="#" class="sortLink" id="sortByDate">Date</a></p>
  <hr />

  {{#if hasApprovedRetakes}}
    <div class="row">
    <div class="col-md-4">
      {{#each listOfAllApprovedRetakes}}
        <p class="scheduledRetake {{selectedRetake}}">Unit {{standard}} | {{date}} | {{time}} {{firstName}} {{lastName}}</p>
      {{/each}}
    </div>
  </div>
    <hr />
      <input type="submit" id="adminRemoveRetake" class="removeRetake btn btn-danger" value="Remove">
  {{else}}
    <p>There are no retakes scheduled at the moment.</p>
  {{/if}}
  <br>
</template>

<template name="home">
  {{> navigation}}
</template>

<template name="listOfRetakes">
  {{#unless isInRole 'admin'}}
    <h3>Your Approved Scheduled Retakes</h3>
    <hr />
    {{#if hasApprovedRetakes}}
      <div class="row">
        <div class="col-md-6">
        {{#each getscheduledApprovedRetakes}}
          <p class="scheduledRetake {{selectedRetake}}">Unit {{standard}} | {{date}}</p>
        {{/each}}
        </div>
      </div>
      {{else}}
        <p>You don't have any approved retakes at the moment.</p>
    {{/if}}
    <hr />
    <h3>Your Requested Scheduled Retakes</h3>
    <div class="row">
      <div class="col-md-6">
        {{#each getscheduledRequestedRetakes}}
        <p class="scheduledRetake {{selectedRetake}}">Unit {{standard}} | {{date}}</p>
        {{/each}}
        {{#if hasRequestedRetakes}}
          <input type="submit" class="cancelRetake btn btn-danger" value="Cancel Request">
        {{else}}
          <p>You don't have any retakes in the queue. Care to change that?</p>
        {{/if}}
      </div>
    </div>
  {{else}}
    <p>{{numberOfRetakesStatement}}</p>
  {{/unless}}
</template>

<template name="listOfRetakeRequests">
  {{#if isInRole 'admin'}}
    <h4>List of Retakes Requested</h4>
    <hr />
    <div class="row">
      <div class="col-md-12">
      {{#each getListOfRetakeRequests}}
        <ul class="scheduledRetake">
          <button type="button" class="btn btn-success" id="approveRequest">Approve</button>
          <button type="button" class="btn btn-danger" id="rejectRequest">Reject</button>
          Unit {{standard}} | {{date}} | {{time}} {{firstName}} {{lastName}}
        </ul>
      {{/each}}
      </div>
    </div>
  {{/if}}
</template>

<template name="loading">
    <h2>Loading...</h2>
</template>

<template name="login">
  <h2>Login</h2>
  <form class="form-group login" name="login">
    <div class="row">
      <div class="col-md-6">
        <div class="input-group input-group-md">
          <span class="input-group-addon">
            <span class="glyphicon glyphicon-envelope"></span>
          </span>
          <input type="email" class="form-control" name="email" placeholder="Email Address" required>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <div class="input-group input-group-md">
          <span class="input-group-addon">
            <span class="glyphicon glyphicon-lock"></span>
          </span>
          <input type="password" class="form-control" name="password" placeholder="Password" required>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <p><a href="#" id="forgotPasswordButton">Forgot Password?</a></p>
      </div>
    </div>
    <br>
    <input type="submit" class="btn btn-success" value="Login">
  </form>
</template>

<template name="main">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <div class="container-fluid">
    <header>
      {{> nav}}
    </header>
    {{> yield}}
  </div>
</template>

<template name="nav">
   <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        {{> navBrand}}
      </div>
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
          {{#unless currentUser}}
          {{/unless}}
          {{#if currentUser}}
            {{#if isInRole 'admin'}}
              <li><a href="{{pathFor 'adminHome'}}">List of Retakes</a></li>
              <li><a href="{{pathFor 'listOfRetakeRequests'}}">Retake Requests</a></li>
            {{else}}
              <li>
                <a href="{{pathFor 'scheduleARetake'}}">Schedule a Retake</a>
              </li>
            {{/if}}
          {{/if}}
        </ul>
        <ul class="nav navbar-nav navbar-right">
          {{#unless currentUser}}
            <li>
              <a href="{{pathFor 'register'}}">Register</a>
            </li>
            <li>
              <a id="loginButton" href="{{pathFor 'login'}}">Login</a>
              </li>
            {{else}}
              <li>
              <a id="logoutButton">Logout</a>
              </li>
            {{/unless}}
        </ul>
      </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
  </nav>
</template>

<template name="navBrand">
  <a class="navbar-brand" href="{{pathFor 'home'}}">WatchaKnow?</a>
</template>

<template name="navigation">
  {{#if currentUser}}
    <h2>Welcome, {{getFirstName}}!</h2>
      {{> listOfRetakes}}
  {{else}}
    <h4>An online scheduler for you to demonstrate your learning in AP Computer Science. Register or
      login to get started!</h4>
  {{/if}}
</template>

<template name="register">
  <h2>Register An Account</h2>
  <form class="form-group register" name="register">
    <div class="row">
      <div class="col-md-3">
        <label>First Name: </label><input type="text" class="form-control" name="firstName" autocomplete="off" required>
      </div>
    </div>
    <div class="row">
      <div class="col-md-3">
        <label>Last Name: </label><input type="text" class="form-control" name="lastName" autocomplete="off" required>
        </div>
    </div>
    <div class="form-group">
        <label for="teacher">Teacher:</label>
        <div class="row">
          <div class="col-md-3">
        <select class="form-control" name="teacher" id="teacher">
          <option disabled selected>Select Your Teacher</option>
          <option value="frame">Mr. Frame</option>
          <option value="forrestal">Mr. Forrestal</option>
        </select> 
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-3">
        <label>Email: </label><input type="email" class="form-control" name="email" autocomplete="off" placeholder="any valid email address" required>
      </div>
    </div>
    <div class="row">
      <div class="col-md-3">
        <label>Password: </label><input type="password" class="form-control" id="password" name="password" autocomplete="off" placeholder="minimum of 6 characters" required>
        </div>
    </div>
    <div class="row">
      <div class="col-md-3">
        <label>Confirm Password: </label><input type="password" class="form-control" name="confirmPassword" autocomplete="off" placeholder="minimum of 6 characters" required>
        </div>
    </div>
    <br>
    <input type="submit" class="btn btn-primary" value="Register">
  </form>
</template>

<template name="scheduleARetake">
  {{#if currentUser}}
    <form method="post" id="orderForm">
      <div class="form-group">
        <label for="unit">Unit:</label>
        <div class="row">
          <div class="col-md-4">
        <select class="form-control" name="unit" id="unit">
          <option disabled selected>Select a Unit</option>
          <option value="u2">Unit 2 - Class Definitions</option>
          <option value="u1">Unit 1 - Introduction to Object-Oriented Programming</option>
          <option value="u0">Unit 0 - Introduction to Computing</option>
        </select> 
        </div>
      </div>
        <br>
        <label for="standard">Standard:</label>
        <div class="row">
          <div class="col-md-4">
            <select class="form-control" name="standard" id="standard">
              <option value="" disabled selected>Select a Standard</option>
            </select>
          </div>
        </div>
      </div>
 
      <label for="date">Date:</label>
      <div class="row">
        <div class='col-md-3'>
          <div class="form-group">
              <div class='input-group date' id='datetimepicker5'>
                <span class="input-group-addon">
                    <span class="glyphicon glyphicon-calendar"></span>
                </span>
                <input type='text' name="dateText" class="form-control" />
              </div>
          </div>
        </div>
          <script type="text/javascript">
              $(function () {
                  $('#datetimepicker5').datetimepicker({
                      defaultDate: moment(),
                      disabledDates: [],
                      daysOfWeekDisabled : [0, 6, (new Date()).getDay()],
                      disabledHours : [0, 1, 2, 3, 4, 5, 6, 7, 17, 18, 19, 20, 21, 22, 23, 24]
                  });
              });
          </script>
      </div>

      <input type="submit" class="btn btn-primary" value="Schedule">
    </form>
  {{/if}}
</template>
